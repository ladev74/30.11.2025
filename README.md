# workmate

## Логика

```text
Когда приходит запрос, но приложение остановлено и отрабатывает уже пришедший ранее
запрос, клиенту приходит ответ с links_num, для последующей возможности получить
ссылки, и статусами ссылок unknown, все данные сохраняются в "временный файл" и при
старте приложения сначала проверяется этот файл и в случае если там есть данные
начинается их обработка

Логика получения данных, во время обработки запроса, при завершении приложения, была 
реализованна с помощью двух context.Context, первый контекст - серверный, второй - запроса.
```

## Endpoints
```text
Эндпоинт для проверки статуса ссылок и их сохранению:
```
```bash
curl -X POST http://localhost:8080/links \
-H "Content-Type application/json" \
-d '{"links":["google.com","yandex.ru"]}'
```

```text
Эндпоинт для получения ссылок по их номеру (не по диапазону):
```
```bash
curl -X GET http://localhost:8080/links \
-H "Content-Type application/json" \
-d '{"links_list":[1,4]}' \
-o report.pdf
```

## Примечание
```text
Есть жестко прописанный time.Sleep, который реализует graceful shutdown, это необходимая мера,
так как использование стандартного server.Shutdown, из библиотеки net/http, было недопустимо
по условию задачи, так как невозможно получать новые запросы, при остановки приложения,
пока он обрабатывает текущие запросы.

Конфиг файл уже заполнен необходимыми данными для запуска.
Команда для запуска:
```
```bash
go run cmd/link-service/main.go --config_path=config/local.env
```